<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/main_layout}">
<head>
<link rel="stylesheet" type="text/css" th:href="@{/css/recipeList.css}" />
<link href="css/shop/recipeMain.css" rel="stylesheet">
</head>
<!-- content -->
<div layout:fragment="content">
	<div id="global-content">
		<div class="recipe-header text-center">
			<h2>Î†àÏãúÌîº Î¶¨Ïä§Ìä∏</h2>
		</div>

		<form name="searchForm" id="searchForm" action="recipeList"
			class="row justify-content-center my-3">
			<div class="col-auto">
				<select name="type" class="form-select">
					<option value="board_title">Ï†úÎ™©</option>
					<option value="member_id">ÏûëÏÑ±Ïûê</option>
					<option value="board_content">ÎÇ¥Ïö©</option>
				</select>
			</div>
			<div class="col-4">
				<input type="text" name="keyword" class="form-control" />
			</div>
			<div class="col-auto">
				<input type="submit" value="Í≤Ä ÏÉâ" class="searchButton" />
			</div>
		</form>
		<th:block th:if="${ searchOption }">
			<div class="row my-3">
				<div class="col text-center">"[[${ keyword }]]" Í≤ÄÏÉâ Í≤∞Í≥º</div>
			</div>
			<div class="row my-3">
				<div class="col-6">
					<a th:href="@{/recipeList}" class="write-button">Ï†ÑÏ≤¥ Î≥¥Í∏∞</a>
				</div>
				<th:block
					th:if="${session.member != null and session.member.id != null}">
					<div class="col-6 text-end">
						<a th:href="@{/recipeWrite}" class="write-button">Í∏ÄÏì∞Í∏∞</a>
					</div>
				</th:block>
				<th:block
					th:unless="${session.member != null and session.member.id != null}	">
				</th:block>
			</div>
		</th:block>
		<th:block th:unless="${ searchOption }">
			<div class="row my-3">
				<th:block
					th:if="${session.member != null and session.member.id != null}">
					<div class="col-6"></div>
					<div class="col-6 text-end">
						<a th:href="@{/recipeWrite}" class="write-button">Í∏ÄÏì∞Í∏∞</a>
					</div>
				</th:block>
				<th:block
					th:unless="${session.member != null and session.member.id != null}">
				</th:block>
			</div>
		</th:block>
		<!-- ÌéòÏù¥ÏßÄ -->
		<div class="row  j-flex align-centent-center " id="productGrid" style="margin-right:1">
			<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 gx-3 gy-3 m-0">
				<!-- Check if recipeList is not null and not empty -->
				<th:block
					th:if="${recipeList != null and not #lists.isEmpty(recipeList)}">
					<!-- Iterate over each recipe in recipeList -->
					<div th:each="recipe : ${recipeList}" class="col">
						<!-- col Î∞ñÏóê text-center ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä -->
						<div class="productBox d-inline-block ">
							<!-- d-inline-block Î∞è text-center ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä -->
							<th:block th:if="${searchOption}">
								<a
									th:href="@{/recipeDetail(boardNo=${recipe.boardNo}, pageNum=${pageNum}, type=${type}, keyword=${keyword})}">
									<!-- Recipe thumbnail with fallback image --> <img
									th:src="${recipe.thumbnail != null and #strings.startsWith(recipe.thumbnail, 'http') ? recipe.thumbnail : './uploads/' + recipe.thumbnail}"
									th:alt="${recipe.boardTitle}"
									style="height: 250px; width: 250px;"
									class="img-fluid  d-block"
									onerror="this.src='http://via.placeholder.com/250x250';">
									     
									<!-- mx-auto Î∞è d-block ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä --> <!-- Recipe title -->
									<div th:text="${recipe.boardTitle}"></div> <!-- Recipe member ID and points -->
									<div th:text="${recipe.memberId} "></div>
									<!-- Recipe registration date -->
									<div class="d-flex align-items-center" th:utext="'<i class=&quot;bi bi-eye-fill&quot;></i>&nbsp;&nbsp;&nbsp;(' + ${recipe.boardView} + 
            ')&nbsp;&nbsp;&nbsp;<i class=&quot;bi bi-star-fill&quot;></i>&nbsp;&nbsp;&nbsp;(' + ${recipe.Apoint} + ')'"></div>
								</a>
							</th:block>
							<th:block th:unless="${searchOption}">
								<a
									th:href="@{/recipeDetail(boardNo=${recipe.boardNo}, pageNum=${pageNum})}">
									<!-- Recipe thumbnail with fallback image --> <img
									th:src="${recipe.thumbnail != null and #strings.startsWith(recipe.thumbnail, 'http') ? recipe.thumbnail : './uploads/' + recipe.thumbnail}"
									th:alt="${recipe.boardTitle}"
									style="height: 250px; width: 250px;"
									class="img-fluid mx-auto d-block"
									onerror="this.src='http://via.placeholder.com/250x250';">
									<!-- mx-auto Î∞è d-block ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä --> <!-- Recipe title -->
									<div th:text="${recipe.boardTitle}"></div> <!-- Recipe member ID and points -->
									<div th:text="${recipe.memberId}"></div>
									<div class="d-flex align-items-center" th:utext="'<i class=&quot;bi bi-eye-fill&quot;></i>&nbsp;&nbsp;&nbsp;(' + ${recipe.boardView} + 
            ')&nbsp;&nbsp;&nbsp;<i class=&quot;bi bi-star-fill&quot;></i>&nbsp;&nbsp;&nbsp;(' + ${recipe.Apoint} + ')'"></div>


 								</a>
							</th:block>
						</div>
					</div>
				</th:block>

			</div>
			<!-- If recipeList is null or empty -->
			<div th:if="${recipeList == null or #lists.isEmpty(recipeList)}"
				class="row my-2">
				<div class="col text-center">
					<h3 class="list-group-item2 my-4" id="falseText">Í≤åÏãúÍ∏ÄÏù¥ Ï°¥Ïû¨ÌïòÏßÄ
						ÏïäÏäµÎãàÎã§.üòÖ</h3>
				</div>
			</div>
		</div>



		<!-- Í∏∞Î≥∏ Í≤ÄÏÉâx Î¶¨Ïä§Ìä∏o -->
		<th:block
			th:if="${not searchOption and not #lists.isEmpty(recipeList)}">
			<div class="row">
				<div class="col">
					<ul class="pagination justify-content-center">
						<li class="page-item" th:if="${startPage > pageGroup}"><a
							class="page-link"
							th:href="@{/recipeList(pageNum=${startPage - pageGroup})}">Pre</a></li>
						<th:block th:each="i : ${#numbers.sequence(startPage, endPage)}">
							<li class="page-item"
								th:classappend="${i == currentPage} ? 'active' : ''"><a
								class="page-link"
								th:href="@{/recipeList(pageNum=${i==0 ? 1 : i})}">[[${i==0 ?
									1 : i}]]</a></li>
						</th:block>
						<li class="page-item" th:if="${endPage < pageCount}"><a
							class="page-link"
							th:href="@{/recipeList(pageNum=${startPage + pageGroup})}">Next</a></li>
					</ul>
				</div>
			</div>
		</th:block>
		<!--Í≤ÄÏÉâo Î¶¨Ïä§Ìä∏o  -->
		<th:block th:if="${ searchOption and not #lists.isEmpty(recipeList)}">
			<div class="row">
				<div class="col">
					<ul class="pagination justify-content-center">
						<li class="page-item" th:if="${startPage > pageGroup}"><a
							class="page-link"
							th:href="@{/recipeList(pageNum=${startPage - pageGroup},type=${type},keyword=${keyword})}">Pre</a></li>
						<th:block th:each="i : ${#numbers.sequence(startPage, endPage)}">
							<li class="page-item"
								th:classappend="${i == currentPage} ? 'active' : ''"><a
								class="page-link"
								th:href="@{/recipeList(pageNum=${i==0 ? 1 : i},type=${type},keyword=${keyword})}">[[${i==0
									? 1 : i}]]</a></li>
						</th:block>
						<li class="page-item" th:if="${endPage < pageCount}"><a
							class="page-link"
							th:href="@{/recipeList(pageNum=${startPage + pageGroup},type=${type},keyword=${keyword})}">Next</a></li>
					</ul>
				</div>
			</div>
		</th:block>

		<!-- Í≤ÄÏÉâo Î¶¨Ïä§Ìä∏x -->
		<th:block th:if="${ searchOption and  #lists.isEmpty(recipeList)}">
			<div class="row">
				<div class="col">
					<ul class="pagination justify-content-center">
						<li class="page-item" th:if="${startPage > pageGroup}"><a
							class="page-link"
							th:href="@{/recipeList(pageNum=${startPage - pageGroup})}">Pre</a></li>
						<th:block th:each="i : ${#numbers.sequence(startPage, endPage)}">
							<th:block th:if="${i == currentPage}">
								<li class="page-item active" aria-current="page"><span
									class="page-link">[[${i}]]</span></li>
							</th:block>
							<th:block th:if="${i != currentPage}">
							</th:block>
						</th:block>
						<li class="page-item" th:if="${endPage < pageCount}"><a
							th:href="@{/recipeList(pageNum=${startPage + pageGroup},type=${type},keyword=${keyword}))}">Next</a></li>
					</ul>
				</div>
			</div>
		</th:block>
		<!-- Í≤ÄÏÉâxÎ¶¨Ïä§Ìä∏x -->
		<th:block th:if="${not searchOption and  #lists.isEmpty(recipeList)}">
			<div class="row">
				<div class="col">
					<ul class="pagination justify-content-center">
						<li class="page-item" th:if="${startPage > pageGroup}"><a
							class="page-link"
							th:href="@{/recipeList(pageNum=${startPage - pageGroup})}">Pre</a></li>
						<th:block th:each="i : ${#numbers.sequence(startPage, endPage)}">
							<th:block th:if="${i == currentPage}">
								<li class="page-item active" aria-current="page"><span
									class="page-link">[[${i}]]</span></li>
							</th:block>
							<th:block th:if="${i != currentPage}">
							</th:block>
						</th:block>
						<li class="page-item" th:if="${endPage < pageCount}"><a
							th:href="@{/recipeList(pageNum=${startPage + pageGroup})}">Next</a></li>
					</ul>
				</div>
			</div>
		</th:block>
	</div>
</html>