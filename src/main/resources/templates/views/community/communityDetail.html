<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/community_layout}">
<link rel="stylesheet" type="text/css" th:href="@{/css/noticeAll.css}" />
<script th:src="@{js/recipe/commuComment.js}"></script>
<script th:src="@{js/communityFormcheck.js}"></script>
<!-- content -->
<th:block layout:fragment="content">
	<div class="row my-5" id="global-content">
		<div class="col-10 offset-1">
			<form name="checkForm" id="checkForm">
				<input type="hidden" name="no" id="no" th:value="${community.no}" />
			</form>
			<div class="row text-center">
				<div class="col">
					<h2 class="fs-3 fw-bold">ìš”ë¦¬ìë‘</h2>
				</div>
			</div>
			<div class="row my-3">
				<div class="col">
					<table class="table">
						<tbody>
							<tr>
								<th class="table-secondary">ì œ ëª©</th>
								<td colspan="3" th:text="${community.title}"></td>
							</tr>
							<tr>
								<th>ì‘ì„±ì</th>
								<td th:text="${community.writer}"></td>
								<th>ì‘ì„±ì¼</th>
								<td>[[${ #dates.format(community.regDate, 'yyyy-MM-dd
									HH:mm') }]]</td>
							</tr>
							<tr>
								<th>ì¡°íšŒìˆ˜</th>
								<td th:text="${community.readCount}"></td>
								<th>íŒŒ&nbsp;&nbsp;&nbsp;&nbsp;ì¼</th>
								<td colspan="3"><th:block
										th:if="${ not #strings.isEmpty(community.file1) }">
										<a th:href="@{|fileDownload?fileName=${community.file1}|}">
											[[ ${community.file1} ]] </a>
									</th:block> <th:block
										th:unless="${ not #strings.isEmpty(community.file1) }">
											ì²¨ë¶€íŒŒì¼ ì—†ìŒ
										</th:block></td>
							</tr>
							<td colspan="4">
								<div style="white-space: pre-wrap;"
									th:text="${community.content}"></div>
							</td>
						</tbody>
					</table>
				</div>
			</div>
			<div class="row my-3">
				<div class="col text-center">
					<button class="write-button" type="button"
						id="communityDetailUpdate">ìˆ˜ì •í•˜ê¸°</button>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<button class="write-button" type="button"
						id="communityDetailDelete">ì‚­ì œí•˜ê¸°</button>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<button class="write-button" type="button"
						onclick="location.href='communityList'">ëª©ë¡ë³´ê¸°</button>
				</div>
			</div>
			<!-- ëŒ“ê¸€í¼ -->
			<div class="row my-4 cook-comments" id="sectionComment">
				<div class="col-3"></div>
				<div class="col-6">
					<h3 class="text-center fw-bold">ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸</h3>
				</div>
				<div
					class="col-3 text-end text-white d-flex justify-content-end align-items-center">
					<button type="button" class="btn btn-success" id="commentBtn">ë§¨
						ìœ„ë¡œ</button>
				</div>
			</div>
			<div id="reviewSection">
				<div class="mb-4">
					<div class="review-write">
						<div class="row">
							<div class="col">
								<h5 class="comment-title">í›„ê¸° ì‘ì„±</h5>
							</div>
						</div>
					</div>
					<div class="comment-body">
						<form id="commuCommentForm" method="post">
							</div>
							<div class="comment-input-section">
								<div
									class="row d-flex justify-content-between align-items-center my-2">
									<div class="col-10">
										<textarea class="form-control" id="commentContent"
											name="commentContent" rows="2" required></textarea>
									</div>
									<div class="col-2">
										<button type="submit" class="write-button-comment"
											style="height: 60px;">í›„ê¸° ì‘ì„±í•˜ê¸°</button>
									</div>
								</div>
							</div>
						</form>
					</div>
			
			<!-- ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ -->
			<div class="review-write">
				<div class="row">
					<div class="col-6">
						<h5 class="comment-lists">í›„ê¸° ë¦¬ìŠ¤íŠ¸</h5>
					</div>
					<div class="col-6 text-end">
					</div>
				</div>
			</div>
			<div class="card-body">
				<ul class="list-group" id="commentList">
					<!-- ëŒ“ê¸€ ì•„ì´í…œ -->
					<th:block th:if="${not #lists.isEmpty(commentList)}">
						<th:block th:each="comment : ${commentList}">
							<li class="list-group-item my-2"
								th:data-comment-id="${comment.commentId}">
								<div class="d-flex justify-content-between">
									<div>
										<p class="mb-1">
											<strong>[[${comment.memberId}]]</strong>
										</p>
										<p class="mb-1 comment-content">[[${comment.commentContent}]]</p>
										<span class="text-muted" name="createdAt"
											th:text="${#dates.format(comment.createdAt, 'yyyy-MM-dd')}"></span>
										<div class="star-icons">
											<th:block th:if="${comment.commentPoint > 0}">
												<th:block
													th:each="star : ${#numbers.sequence(1, comment.commentPoint)}">
													<i class="bi bi-star-fill"></i>
												</th:block>
											</th:block>
											<th:block th:if="${comment.commentPoint < 5}">
												<th:block
													th:each="star : ${#numbers.sequence(comment.commentPoint + 1, 5)}">
													<i class="bi bi-star"></i>
												</th:block>
											</th:block>
										</div>
									</div>
									<div>
										<th:block
											th:if="${session.member != null and session.member.id != null and comment.memberId != null and session.member.id == comment.memberId}">
											<button class="comment-edit btn-sm"
												onclick="editComment(this)">ìˆ˜ì •</button>
											<button class="comment-delete btn-sm"
												onclick="deleteComment(this)">ì‚­ì œ</button>
										</th:block>
									</div>
								</div>
							</li>
						</th:block>
					</th:block>
					<!-- ëŒ“ê¸€ì´ ì—†ëŠ” ê²½ìš° -->
					<th:block th:if="${#lists.isEmpty(commentList)}">
						<span class="list-group-item2 my-2" id="falseText">í›„ê¸°ê°€ ì¡´ì¬í•˜ì§€
							ì•ŠìŠµë‹ˆë‹¤.ğŸ˜…</span>
					</th:block>
					<!-- ë” ë§ì€ ëŒ“ê¸€ ì•„ì´í…œë“¤ -->
				</ul>
			</div>
			<!-- ëŒ“ê¸€í¼ë§ˆë¬´ë¦¬ -->
				</div>
			</div>
		</div>
	</div>
</th:block>
</html>
